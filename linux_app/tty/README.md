# 串口终端示例

串口终端示例，开发板默认的出厂镜像中：

- /dev/ttymxc0用于串口1，默认用于控制开发板的命令行终端。
- /dev/ttymxc2用于串口3，是开发板上UART3的DB9接口，使用是必须要连接跳线帽：
    * "UART3_TXD<---->T2IN"
    * "UART3_RXD<---->R2OUT"


各个目录的演示说明如下：
1. c:使用系统调用的文件操作方式进行串口通讯，比较简单粗暴
2. c_full:是上面代码的改进版，增加了配置串口波特率和数据位、校验等的函数，方便使用
3. c_ioctl:使用ioctl系统调用代替tcgetattr和tcsetattr，演示ioctl的使用
4. shell:使用shell命令echo和cat进行串口测试



## c、c_full、c_ioctl范例说明
使用open、read、write、close、tcgetattr等函数控制串口

### 编译


编译的输出目录为`build_xxx/tty_demo`文件
切换至Makefile所在目录,使用如下命令编译:

x86平台编译指令：
```bash
#注意编译前要把代码中的设备路径修改成主机上的设备
make
```

ARM平台编译指令：
``` bash
make ARCH=arm
```

### 运行

程序默认使用开发板中的ttymxc2设备进行测试，运行时可使用参数指定要测试的输入设备路径。

可使用ls  /dev/tty*  查看系统中存在的tty设备：



编译后在Ubuntu上使用如下命令运行：
``` bash
#查看可用的tty设备文件
ls  /dev/tty*

#请根据自己主机上的输出修改设备文件参数
#程序需要使用sudo运行
sudo   ./build_x86/tty_demo   /dev/ttyUSB0
----------------------------------------------------------------------
#在另一个设备通过串口发送内容至Ubuntu主机
#本示例中是开发板与电脑连接，此处在开发板中使用echo命令发送内容至串口3
#以下命令在开发板的终端执行
#以下命令在开发板的终端执行
#确认串口波特率
stty  -F  /dev/ttymxc2
#发送数据
echo   board  >  /dev/ttymxc2
#Ubuntu主机端会收到数据并显示

```

程序默认使用开发板中的ttymxc2设备进行测试，运行时可使用参数指定要测试的输入设备路径。
编译后在ARM终端上使用如下命令运行：
``` bash
#以下命令在Ubuntu主机执行
#以下命令在Ubuntu主机执行
#根据自己主机的设备配置minicom，注意波特率要匹配
#关于minicom的配置请参考前面小节的内容
sudo  minicom   /dev/ttyUSB0
#配置完毕打开minicom终端
----------------------------------------------------------------------
#以下命令在开发板上的终端执行
#以下命令在开发板上的终端执行

#在NFS共享的工程目录路径执行
#使用默认的ttymxc2设备通讯
./build_arm/tty_demo

#程序会通过串口发送内容至主机
#主机使用minicom可发送内容至开发板

```

